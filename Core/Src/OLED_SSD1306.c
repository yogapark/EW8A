/*
 * OLED_SSD1306.c
 *
 *  Created on: 2020. 11. 27.
 *      Author: noto_GTX55
 */


/* Includes ------------------------------------------------------------------*/
#include "OLED_SSD1306.h"
#include "i2c.h"

/* Private define ------------------------------------------------------------*/
/* USER CODE BEGIN PD */
//#define Write_Address   0x78/*slave addresses write*/
/* USER CODE END PD */

extern int gCount_SCREEN_IDLE_TIME;
uint8_t Write_Address = 0x78;
int isScreenOn = 0;


void OLED_Sellect_first(void)
{
	Write_Address = 0x78;
}

void OLED_Sellect_second(void)
{
	Write_Address = 0x7A;
}

void OLED_W_Command(uint8_t cmd)
{
	uint8_t buff[2];
	buff[0] = 0x80;
	buff[1] = cmd;

	if(HAL_I2C_Master_Transmit(&hi2c1, Write_Address, &buff[0], 2, 100) != HAL_OK)
	{
		Error_Handler();
	}
	while(HAL_I2C_GetState(&hi2c1) != HAL_I2C_STATE_READY);

}

void OLED_Set_Address(uint8_t page, uint8_t column)
{
	OLED_W_Command(0xb0|page);
	OLED_W_Command(0x10|(column>>4));
	OLED_W_Command(0x0f&column);
}

void OLED_W_DATA(uint8_t* data_buffer, uint16_t buffer_size)
{
	if(HAL_I2C_Mem_Write(&hi2c1, Write_Address, 0x40, I2C_MEMADD_SIZE_8BIT, data_buffer, buffer_size, 100)!= HAL_OK)
	{
		Error_Handler();
	}
	while(HAL_I2C_GetState(&hi2c1) != HAL_I2C_STATE_READY);

}

void OLED_Init(void)
{
	HAL_GPIO_WritePin(GPIOB, GPIO_PIN_5, GPIO_PIN_SET);
	HAL_Delay(10);
	HAL_GPIO_WritePin(GPIOB, GPIO_PIN_5, GPIO_PIN_RESET);
	HAL_Delay(10);
	HAL_GPIO_WritePin(GPIOB, GPIO_PIN_5, GPIO_PIN_SET);
	HAL_Delay(20);


	OLED_W_Command(0xA8);	//Set Mux Ratio
	OLED_W_Command(0x3F);	//64MUX

	OLED_W_Command(0xD3);	//Set Display Offset
	OLED_W_Command(0x00);	//COM0

	OLED_W_Command(0x40);	//Set Display Start Line

	OLED_W_Command(0xA0);	//Set Segment re-map(0xA1), Default 0xA0
				//(0xA1) column address 127 is mapped to SEG0 (좌우 반전)

	OLED_W_Command(0xC0);	//Set COM Output Scan Direction, default 0xC0
				//remapped mode. Scan from COM[N-1] to COM0 (?��?�� 반전)

	OLED_W_Command(0xDA);	//Set COM Pins hardware configuration
	OLED_W_Command(0x12);

	OLED_W_Command(0x20);	//Set Memory Addressing Mode
	OLED_W_Command(0x02);	//Page Addressing Mode

	OLED_W_Command(0x81);	//Set Contrast Control
	OLED_W_Command(0x7F);	//1~256

	OLED_W_Command(0xA4);	//Disable Entire Display On

	OLED_W_Command(0xA6);	//Set Normal Display(a6 normal, a7 inverse display

	OLED_W_Command(0xD5);	//Set Osc Frequency
	OLED_W_Command(0x80);

	OLED_W_Command(0x8D);	//Enable charge pump regulator
	OLED_W_Command(0x14);

	OLED_W_Command(0xAF);	//Display ON
}

void OLED_Page_Clear(uint8_t Clear_byte)
{
	uint16_t i=0;
	uint8_t OLED_data[128];

	for(i=0;i<128;i++)
		OLED_data[i] = Clear_byte;

	OLED_W_DATA(&OLED_data[0], i);
}

void OLED_Screen_Clear(void)
{
	int i=0;

	for(i=0;i<8;i++)
	{
		OLED_Set_Address(i,0);
		OLED_Page_Clear(0x00);
	}
}

void OLED_Screen_Clean(uint8_t page, uint8_t column, int data)
{
	uint16_t i=0;
	uint8_t OLED_data[128];

	for(i=0;i<data;i++)
		OLED_data[i] = 0x00;

	OLED_Set_Address(page,column);
	OLED_W_DATA(&OLED_data[0], i);
}

void OLED_image_test(uint8_t page)
{
	uint8_t gImage_gaoncel128x32[512] = { /* 0X22,0X01,0X80,0X00,0X20,0X00, */
	0X00,0X00,0X00,0XC0,0XF0,0XF8,0XFC,0X3C,0X1C,0X9C,0X9C,0X9C,0X9C,0X9C,0X9C,0X1C,
	0X08,0X00,0X00,0X00,0X80,0XE0,0XF8,0XFC,0X3E,0X1E,0X3E,0XFC,0XF8,0XE0,0X80,0X00,
	0X00,0XC0,0XF0,0XF8,0X3C,0X1C,0X00,0XFE,0XFF,0XFE,0X00,0X1C,0X3C,0XF8,0XF0,0XC0,
	0X00,0XF8,0XFC,0XFE,0X0E,0X3E,0XFC,0XF8,0XC0,0X00,0X00,0XFC,0XFE,0XFC,0X00,0X00,
	0XC0,0XF0,0XF8,0XFC,0X3C,0X1C,0X1C,0X1C,0X1C,0X1C,0X1C,0X1C,0X1C,0X08,0X00,0XF0,
	0XF8,0XFC,0XFC,0X9C,0X9C,0X9C,0X9C,0X9C,0X9C,0X9C,0X9C,0X9C,0X08,0X00,0X00,0XF8,
	0XFC,0XFC,0XF8,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0XF8,0XFC,
	0XFC,0XF8,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
	0X00,0X00,0X00,0X07,0X1F,0X3F,0X7F,0X78,0XF0,0XF3,0XF3,0XF3,0XF3,0X73,0X7F,0X3F,
	0X1E,0X40,0XF0,0XFE,0X7F,0X1F,0X03,0X00,0X00,0X00,0X00,0X00,0X03,0X1F,0X7F,0XFE,
	0XF0,0X47,0X1F,0X3F,0X7C,0X70,0XF0,0XE0,0XE1,0XE0,0XF0,0X70,0X7C,0X3F,0X1F,0X07,
	0X00,0X7F,0XFF,0X7F,0X00,0X00,0X03,0X0F,0X3F,0X7C,0XF0,0XFF,0X7F,0X3F,0X00,0X00,
	0X07,0X1F,0X3F,0X7F,0X78,0XF0,0XF0,0XF0,0XF0,0XF0,0XF0,0XF0,0XF0,0X60,0X00,0X1C,
	0X7E,0X7F,0XFF,0XF3,0XF3,0XF3,0XF3,0XF3,0XF3,0XF3,0XF3,0XF3,0X61,0X00,0X00,0X1F,
	0X7F,0X7F,0XFF,0XF8,0XF0,0XF0,0XF0,0XF0,0XF0,0XF0,0XF0,0X60,0X00,0X00,0X1F,0X7F,
	0X7F,0XFF,0XF8,0XF0,0XF0,0XF0,0XF0,0XF0,0XF0,0XF0,0X60,0X00,0X00,0X00,0X00,0X00,
	0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
	0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
	0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
	0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
	0X00,0XE0,0XF0,0X30,0X00,0XA0,0XE0,0X60,0X60,0XE0,0XA0,0X00,0X30,0XF0,0XE0,0X00,
	0X00,0X00,0X30,0X30,0X30,0XF0,0XF0,0XF0,0X00,0XE0,0XF0,0X70,0X70,0X60,0X00,0X00,
	0X00,0X00,0X60,0XF0,0XF8,0X98,0X98,0XF8,0XF0,0X60,0X00,0X00,0X00,0X00,0X00,0X00,
	0X00,0XC0,0XF0,0XE0,0XC0,0X80,0XE0,0XF0,0X00,0XE0,0XF0,0X00,0X00,0X00,0X00,0X00,
	0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
	0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
	0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
	0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
	0X00,0X07,0X0F,0X0C,0X00,0X02,0X02,0X0E,0X0E,0X02,0X02,0X00,0X0C,0X0F,0X07,0X00,
	0X00,0X00,0X08,0X0C,0X0E,0X07,0X07,0X03,0X00,0X7F,0XFF,0XC0,0X00,0X00,0X00,0X00,
	0X00,0X06,0XF6,0XF6,0XC6,0XC7,0XC7,0XC6,0XC6,0XC6,0XC6,0X40,0X00,0X00,0X00,0X03,
	0X6F,0XEB,0XE8,0XE9,0XAB,0XAA,0XAB,0XBF,0XBC,0XBF,0XBF,0X00,0X00,0X00,0X00,0X00,
	};

	OLED_Set_Address(page,0);
	OLED_W_DATA(&gImage_gaoncel128x32[0],128);
	OLED_Set_Address(page+1,0);
	OLED_W_DATA(&gImage_gaoncel128x32[128],128);
	OLED_Set_Address(page+2,0);
	OLED_W_DATA(&gImage_gaoncel128x32[256],128);
	OLED_Set_Address(page+3,0);
	OLED_W_DATA(&gImage_gaoncel128x32[384],128);

}

void OLED_image_test_ener(void)
{
	uint16_t i;
	uint8_t gImage_ener74x64[592] = { /* 0X22,0X01,0X4A,0X00,0X40,0X00, */
	0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
	0X00,0XF8,0XF8,0XF8,0XFC,0X18,0X18,0X18,0X18,0X18,0X18,0X18,0X18,0X18,0X18,0X18,
	0X18,0X18,0X18,0X18,0X18,0X18,0X18,0X18,0X18,0X18,0X18,0X18,0X18,0X18,0X18,0X18,
	0X18,0X18,0XF8,0XF8,0XF8,0XFC,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
	0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
	0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0XFF,0XFF,0XFF,0XFF,0X00,
	0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0XFC,0XFC,0XFC,0XFC,
	0X3C,0X3C,0X3C,0X3C,0X3C,0X3C,0X3C,0X3C,0X3C,0X00,0X00,0X00,0X03,0X03,0X03,0X03,
	0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
	0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
	0X00,0X00,0X00,0X00,0X00,0XFF,0XFF,0XFF,0XFF,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
	0X00,0X00,0X00,0X00,0X00,0X00,0XFF,0XFF,0XFF,0XFF,0X3C,0X3C,0X3C,0X3C,0X3C,0X3C,
	0X3C,0X3C,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
	0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
	0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0XFF,
	0XFF,0XFF,0XFF,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
	0X7F,0X7F,0X7F,0X7F,0X78,0X78,0X78,0X78,0X78,0X78,0X78,0X78,0X78,0X00,0X00,0X00,
	0X80,0X80,0X80,0X80,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
	0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
	0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X01,0X03,0X07,0X00,0X10,0X30,
	0X30,0X30,0X30,0X30,0X30,0X30,0X30,0X30,0X30,0X30,0X30,0X30,0X30,0X30,0X30,0X30,
	0X30,0X30,0X30,0X30,0X30,0X30,0X30,0X30,0X30,0X30,0X3F,0X3F,0X3F,0X07,0X00,0X00,
	0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
	0X00,0X00,0X00,0X00,0X00,0XF0,0XF0,0X10,0X10,0X10,0X10,0X00,0X00,0XF0,0X30,0XE0,
	0X80,0X00,0X00,0XF0,0XF0,0X00,0XF0,0XF0,0X10,0X10,0X10,0X10,0X10,0X00,0XF0,0XF0,
	0X10,0X10,0X10,0XB0,0XE0,0X00,0XF0,0XF0,0X00,0X00,0XE0,0X30,0XF0,0X00,0X00,0XC0,
	0XF0,0X00,0X00,0X80,0XF0,0X10,0XF0,0X80,0X00,0X30,0XF0,0X80,0X00,0X00,0X00,0XF0,
	0X30,0X00,0XF0,0XF0,0X10,0X10,0X10,0X10,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X3F,
	0X3F,0X21,0X21,0X21,0X21,0X20,0X00,0X3F,0X00,0X01,0X03,0X0E,0X38,0X3F,0X3F,0X00,
	0X3F,0X3F,0X21,0X21,0X21,0X21,0X20,0X00,0X3F,0X3F,0X02,0X02,0X0F,0X3F,0X31,0X00,
	0X01,0X1F,0X3C,0X3E,0X07,0X00,0X07,0X3F,0X30,0X3F,0X01,0X20,0X3C,0X0F,0X05,0X04,
	0X05,0X0F,0X3C,0X20,0X01,0X0F,0X3C,0X38,0X1F,0X03,0X00,0X00,0X3F,0X3F,0X21,0X21,
	0X21,0X20,0X00,0X00,0X00,0X00,0X00,0X00,0X30,0X00,0X40,0X30,0X00,0X30,0X48,0X10,
	0X48,0X30,0X38,0X40,0X34,0X30,0X30,0X30,0X48,0X10,0X00,0X10,0X10,0X30,0X00,0X30,
	0X30,0X48,0X10,0X30,0X58,0XE8,0XD0,0XB0,0X60,0X00,0X08,0X50,0X30,0X30,0X48,0X30,
	0X7C,0X30,0X00,0X30,0X38,0X00,0X00,0X00,0X30,0X00,0X00,0X30,0X00,0X38,0X00,0X30,
	0X48,0X10,0X60,0X08,0X30,0X48,0X3C,0X30,0X48,0X10,0X30,0X08,0X00,0X00,0X00,0X00,
	};

	for(i=0;i<8;i++)
	{
		OLED_Set_Address(i,28);
		OLED_W_DATA(&gImage_ener74x64[74*i],74);
	}
}

void OLED_image_test_iROAD(void)
{
	uint16_t i;

	uint8_t gImage_iRoad_logo105x32[420] = { /* 0X22,0X01,0X69,0X00,0X20,0X00, */
	0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
	0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
	0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
	0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
	0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
	0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
	0X00,0XC0,0X00,0X40,0X80,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0XF0,0XF0,
	0XF0,0XF0,0X00,0X00,0X00,0X00,0XF0,0XF0,0XF0,0XF0,0X70,0X70,0X70,0X70,0X70,0X70,
	0X70,0X70,0X70,0X70,0X70,0XF0,0XF0,0XF0,0XE0,0X00,0X00,0X00,0XC0,0XF0,0XF0,0XF0,
	0XF0,0X70,0X70,0X70,0X70,0X70,0X70,0X70,0X70,0X70,0X70,0X70,0XF0,0XF0,0XF0,0XE0,
	0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0XC0,0XF0,0XF0,0XF0,0X30,0X30,0XF0,0XF0,
	0XF0,0XC0,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0XF0,0XF0,0XF0,0XF0,0X70,
	0X70,0X70,0X70,0X70,0X70,0X70,0X70,0X70,0X70,0X70,0XF0,0XF0,0XF0,0XF0,0X00,0X00,
	0X00,0X00,0X00,0X00,0X00,0X00,0X00,0XFF,0XFF,0XFF,0XFF,0X00,0X00,0X00,0X00,0XFF,
	0XFF,0XFF,0XFF,0X1C,0X1C,0X1C,0X1C,0X1C,0X1C,0X1C,0X1C,0X1C,0X1C,0X1C,0XFF,0XFF,
	0XF7,0XE3,0X00,0X00,0X00,0XFF,0XFF,0XFF,0XFF,0XFF,0X00,0X00,0X00,0X00,0X00,0X00,
	0X00,0X00,0X00,0X00,0X80,0XFF,0XFF,0XFF,0XFF,0X00,0X00,0X00,0X80,0XE0,0XF8,0XFC,
	0XFF,0XFF,0XEF,0XE3,0XE0,0XE0,0XE0,0XE0,0XE3,0XEF,0XFF,0XFF,0XFE,0XF8,0XE0,0X80,
	0X00,0X00,0X00,0X00,0XFF,0XFF,0XFF,0XFF,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
	0X00,0X00,0X00,0XFF,0XFF,0XFF,0XFF,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
	0X07,0X07,0X07,0X07,0X00,0X00,0X00,0X00,0X07,0X07,0X07,0X07,0X00,0X00,0X00,0X00,
	0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X07,0X07,0X07,0X07,0X00,0X00,0X00,0X01,0X07,
	0X07,0X07,0X07,0X07,0X07,0X07,0X07,0X07,0X07,0X07,0X07,0X07,0X07,0X07,0X07,0X07,
	0X07,0X03,0X00,0X00,0X06,0X07,0X07,0X07,0X03,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
	0X00,0X00,0X00,0X00,0X00,0X03,0X07,0X07,0X07,0X06,0X00,0X00,0X00,0X07,0X07,0X07,
	0X07,0X07,0X07,0X07,0X07,0X07,0X07,0X07,0X07,0X07,0X07,0X07,0X07,0X07,0X07,0X07,
	0X00,0X00,0X00,0X00,};



	for(i=0;i<4;i++)
	{
		OLED_Set_Address(i+2,8);
		OLED_W_DATA(&gImage_iRoad_logo105x32[105*i],105);
	}
}

void OLED_image_iROAD(void)
{
//	uint16_t i;

	uint8_t gImage_128x24[384] = { /* 0X22,0X01,0X80,0X00,0X18,0X00, */
	0X00,0X00,0X00,0X00,0X00,0X00,0XFC,0XFC,0XFC,0XFC,0XF8,0X00,0X00,0X00,0X00,0XF8,
	0XFC,0XFC,0XFC,0XFC,0XFC,0X3C,0X3C,0X3C,0X3C,0X3C,0X3C,0X3C,0X3C,0X3C,0X3C,0X3C,
	0X3C,0X3C,0XFC,0XFC,0XF8,0XF8,0XF8,0X00,0X00,0X00,0X00,0XF0,0XF8,0XF8,0XFC,0XFC,
	0X7C,0X3C,0X3C,0X3C,0X3C,0X3C,0X3C,0X3C,0X3C,0X3C,0X3C,0X3C,0X3C,0XFC,0XFC,0XFC,
	0XF8,0XF8,0XF0,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0XC0,0XF0,0XF8,0XFC,
	0XFC,0X7C,0X3C,0X3C,0X7C,0XFC,0XFC,0XF8,0XF0,0XC0,0X00,0X00,0X00,0X00,0X00,0X00,
	0X00,0X00,0X00,0X00,0XFC,0XFC,0XFC,0XFC,0XFC,0X3C,0X3C,0X3C,0X3C,0X3C,0X3C,0X3C,
	0X3C,0X3C,0X3C,0X3C,0X3C,0X3C,0XFC,0XFC,0XFC,0XF8,0XF8,0XF0,0X00,0X00,0X00,0X00,
	0X00,0X00,0X00,0X00,0X00,0X00,0XFF,0XFF,0XFF,0XFF,0XFF,0X00,0X00,0X00,0X00,0XFF,
	0XFF,0XFF,0XFF,0XFF,0XFF,0X1C,0X1C,0X1C,0X1C,0X1C,0X1C,0X1C,0X1C,0X1C,0X1C,0X1C,
	0X3C,0X3C,0XFF,0XFF,0XFF,0XF7,0XE3,0X00,0X00,0X00,0X00,0XFF,0XFF,0XFF,0XFF,0XFF,
	0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0XFF,0XFF,0XFF,
	0XFF,0XFF,0XFF,0X00,0X00,0X00,0X00,0X80,0XC0,0XF0,0XFC,0XFF,0XFF,0XFF,0XDF,0XC7,
	0XC1,0XC0,0XC0,0XC0,0XC0,0XC1,0XC7,0XDF,0XFF,0XFF,0XFF,0XFC,0XF0,0XC0,0X80,0X00,
	0X00,0X00,0X00,0X00,0XFF,0XFF,0XFF,0XFF,0XFF,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
	0X00,0X00,0X00,0X00,0X00,0X00,0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0X00,0X00,0X00,0X00,
	0X00,0X00,0X00,0X00,0X00,0X00,0X1F,0X1F,0X1F,0X1F,0X1F,0X00,0X00,0X00,0X00,0X0F,
	0X1F,0X1F,0X1F,0X1F,0X1F,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
	0X00,0X00,0X1F,0X1F,0X1F,0X1F,0X1F,0X00,0X00,0X00,0X00,0X07,0X0F,0X1F,0X1F,0X1F,
	0X1F,0X1E,0X1E,0X1E,0X1E,0X1E,0X1E,0X1E,0X1E,0X1E,0X1E,0X1E,0X1E,0X1F,0X1F,0X1F,
	0X1F,0X0F,0X07,0X00,0X00,0X18,0X1E,0X1F,0X1F,0X1F,0X1F,0X07,0X01,0X01,0X01,0X01,
	0X01,0X01,0X01,0X01,0X01,0X01,0X01,0X01,0X01,0X01,0X07,0X0F,0X1F,0X1F,0X1F,0X1E,
	0X18,0X00,0X00,0X00,0X1F,0X1F,0X1F,0X1F,0X1F,0X1E,0X1E,0X1E,0X1E,0X1E,0X1E,0X1E,
	0X1E,0X1E,0X1E,0X1E,0X1E,0X1E,0X1F,0X1F,0X1F,0X1F,0X0F,0X07,0X00,0X00,0X00,0X00,
	};

	OLED_Set_Address(3,0);
	OLED_W_DATA(&gImage_128x24[0],13);

	OLED_Set_Address(4,0);
	OLED_W_DATA(&gImage_128x24[128],13);

	OLED_Set_Address(5,0);
	OLED_W_DATA(&gImage_128x24[256],13);

	HAL_Delay(200);

	OLED_Set_Address(3,13);
	OLED_W_DATA(&gImage_128x24[13],28);

	OLED_Set_Address(4,13);
	OLED_W_DATA(&gImage_128x24[128+13],28);

	OLED_Set_Address(5,13);
	OLED_W_DATA(&gImage_128x24[256+13],28);

	HAL_Delay(200);

	OLED_Set_Address(3,41);
	OLED_W_DATA(&gImage_128x24[41],27);

	OLED_Set_Address(4,41);
	OLED_W_DATA(&gImage_128x24[128+41],27);

	OLED_Set_Address(5,41);
	OLED_W_DATA(&gImage_128x24[256+41],27);

	HAL_Delay(200);

	OLED_Set_Address(3,68);
	OLED_W_DATA(&gImage_128x24[68],30);

	OLED_Set_Address(4,68);
	OLED_W_DATA(&gImage_128x24[128+68],30);

	OLED_Set_Address(5,68);
	OLED_W_DATA(&gImage_128x24[256+68],30);

	HAL_Delay(200);

	OLED_Set_Address(3,98);
	OLED_W_DATA(&gImage_128x24[98],30);

	OLED_Set_Address(4,98);
	OLED_W_DATA(&gImage_128x24[128+98],30);

	OLED_Set_Address(5,98);
	OLED_W_DATA(&gImage_128x24[256+98],30);

	HAL_Delay(200);

	OLED_display_string(2, 110, "TM");


}

void OLED_image_Loading(void)
{
	uint16_t i;

	uint8_t gImage_sLoading[288] = { /* 0X22,0X01,0X60,0X00,0X18,0X00, */
	0X00,0X18,0X18,0XF8,0XF8,0X18,0X18,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
	0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
	0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X18,0X18,0XF8,0XF8,0X00,
	0X00,0X00,0X00,0X00,0X00,0X38,0X38,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
	0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
	0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
	0X00,0X00,0X00,0XFF,0XFF,0X00,0X00,0X00,0X00,0X00,0XC0,0XC0,0X00,0X00,0XFC,0XFE,
	0X07,0X03,0X03,0X03,0X07,0XFE,0XFC,0X00,0X00,0X00,0X8C,0XCE,0XE6,0X63,0X63,0X63,
	0X67,0XFE,0XFC,0X00,0X00,0X00,0XFC,0XFE,0X07,0X03,0X03,0X03,0X06,0XFF,0XFF,0X00,
	0X00,0X00,0X00,0X03,0X03,0XFF,0XFF,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X03,0XFF,
	0XFE,0X07,0X03,0X03,0X03,0XFF,0XFE,0X00,0X00,0X00,0XFC,0XFE,0X07,0X03,0X03,0X03,
	0X07,0XFE,0XFF,0X03,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
	0X00,0X18,0X18,0X1F,0X1F,0X18,0X18,0X18,0X18,0X18,0X1F,0X1F,0X00,0X00,0X07,0X0F,
	0X1C,0X18,0X18,0X18,0X1C,0X0F,0X07,0X00,0X00,0X00,0X07,0X0F,0X1C,0X18,0X18,0X18,
	0X1C,0X0F,0X1F,0X18,0X00,0X00,0X07,0X0F,0X1C,0X18,0X18,0X18,0X0C,0X1F,0X1F,0X18,
	0X00,0X00,0X18,0X18,0X18,0X1F,0X1F,0X18,0X18,0X18,0X00,0X00,0X00,0X00,0X18,0X1F,
	0X1F,0X18,0X00,0X00,0X18,0X1F,0X1F,0X18,0X00,0X00,0X31,0X73,0X67,0X66,0X66,0X66,
	0X73,0X3F,0X1F,0X00,0X00,0X00,0X00,0X00,0X00,0X18,0X3C,0X18,0X00,0X00,0X00,0X00,
	};

	for(i=0;i<7;i++)
	{
		OLED_Set_Address(2,16+i*12);
		OLED_W_DATA(&gImage_sLoading[0+i*12],12);

		OLED_Set_Address(3,16+i*12);
		OLED_W_DATA(&gImage_sLoading[96+i*12],12);

		OLED_Set_Address(4,16+i*12);
		OLED_W_DATA(&gImage_sLoading[192+i*12],12);

		HAL_Delay(300);
	}

	OLED_Set_Address(4,102);
	OLED_W_DATA(&gImage_sLoading[280],4);
	HAL_Delay(300);

	OLED_Set_Address(4,108);
	OLED_W_DATA(&gImage_sLoading[280],4);
	HAL_Delay(300);

	OLED_Set_Address(4,114);
	OLED_W_DATA(&gImage_sLoading[280],4);
	HAL_Delay(300);

}

void OLED_W_Num6x8(uint8_t num)
{
	uint8_t gImage_NUM_6x8[60] = { /* 0X22,0X01,0X3C,0X00,0X08,0X00, */
	0X00,0X7E,0X81,0X81,0X81,0X7E,0X00,0X02,0X02,0XFF,0X00,0X00,0X00,0XC6,0XA1,0X91,
	0X89,0X86,0X00,0X42,0X89,0X89,0X89,0X76,0X00,0X30,0X2C,0X23,0XFF,0X20,0X00,0X4F,
	0X89,0X89,0X89,0X71,0X00,0X7E,0X89,0X89,0X89,0X72,0X00,0X01,0X01,0XE1,0X1D,0X03,
	0X00,0X76,0X89,0X89,0X89,0X76,0X00,0X4E,0X91,0X91,0X91,0X7E,};

	OLED_W_DATA(&gImage_NUM_6x8[6*num],6);
}

void OLED_W_BChar6x8(uint8_t character)
{
	uint8_t gImage_BChar_6x8[156] = { /* 0X22,0X01,0X9C,0X00,0X08,0X00, */
	0X00,0XE0,0X3C,0X23,0X3C,0XE0,0X00,0XFF,0X89,0X89,0X89,0X76,0X00,0X7E,0X81,0X81,
	0X81,0X42,0X00,0XFF,0X81,0X81,0X81,0X7E,0X00,0XFF,0X89,0X89,0X89,0X89,0X00,0XFF,
	0X09,0X09,0X09,0X01,0X00,0X7E,0X81,0X89,0X49,0XFA,0X00,0XFF,0X08,0X08,0X08,0XFF,
	0X00,0X00,0X00,0XFF,0X00,0X00,0X00,0X60,0X80,0X80,0X7F,0X00,0X00,0XFF,0X08,0X14,
	0X22,0XC1,0X00,0XFF,0X80,0X80,0X80,0X80,0X00,0XFF,0X0C,0X70,0X0C,0XFF,0X00,0XFF,
	0X06,0X18,0X60,0XFF,0X00,0X7E,0X81,0X81,0X81,0X7E,0X00,0XFF,0X11,0X11,0X11,0X0E,
	0X00,0X7E,0X81,0XA1,0X41,0XBE,0X00,0XFF,0X11,0X11,0X11,0XEE,0X00,0X46,0X89,0X89,
	0X91,0X62,0X00,0X01,0X01,0XFF,0X01,0X01,0X00,0X7F,0X80,0X80,0X80,0X7F,0X00,0X07,
	0X38,0XC0,0X38,0X07,0X00,0X1F,0XE0,0X1F,0XE0,0X1F,0X00,0XC3,0X24,0X18,0X24,0XC3,
	0X00,0X03,0X0C,0XF0,0X0C,0X03,0X00,0X81,0XE1,0X99,0X87,0X81,};

	OLED_W_DATA(&gImage_BChar_6x8[6*character],6);
}

void OLED_W_sChar6x8(uint8_t character)
{
	uint8_t gImage_sChar_6x8[156] = { /* 0X22,0X01,0X9C,0X00,0X08,0X00, */
	0X00,0X68,0X94,0X94,0X94,0XF8,0X00,0XFF,0X84,0X84,0X84,0X78,0X00,0X78,0X84,0X84,
	0X84,0X48,0X00,0X78,0X84,0X84,0X84,0XFF,0X00,0X78,0X94,0X94,0X94,0X58,0X00,0X04,
	0XFF,0X05,0X00,0X00,0X00,0X18,0XA4,0XA4,0XA4,0XFC,0X00,0XFF,0X04,0X04,0X04,0XF8,
	0X00,0X00,0X00,0XFD,0X00,0X00,0X00,0XC0,0X80,0XFD,0X00,0X00,0X00,0XFF,0X30,0X48,
	0X84,0X00,0X00,0X00,0X00,0XFF,0X00,0X00,0X00,0XFC,0X04,0XF8,0X04,0XF8,0X00,0XFC,
	0X04,0X04,0X04,0XF8,0X00,0X78,0X84,0X84,0X84,0X78,0X00,0XFC,0X24,0X24,0X24,0X18,
	0X00,0X18,0X24,0X24,0X24,0XFC,0X00,0X00,0XFC,0X04,0X04,0X00,0X00,0X48,0X94,0X94,
	0XA4,0X48,0X00,0X04,0XFF,0X84,0X00,0X00,0X00,0X7C,0X80,0X80,0X80,0X7C,0X00,0X0C,
	0X30,0XC0,0X30,0X0C,0X00,0X3C,0XC0,0X3C,0XC0,0X3C,0X00,0X84,0X48,0X30,0X48,0X84,
	0X00,0X0C,0X90,0X60,0X10,0X0C,0X00,0XC4,0XA4,0X94,0X8C,0X00,};

	OLED_W_DATA(&gImage_sChar_6x8[6*character],6);
}


void OLED_W_Char(uint8_t Character, uint8_t page, uint8_t column)
{
	OLED_Set_Address(page, column);

	if(Character >= '0' && Character <= '9')
		OLED_W_Num6x8(Character - '0');
	if(Character >= 'A' && Character <= 'Z')
		OLED_W_BChar6x8(Character - 'A');
	if(Character >= 'a' && Character <= 'z')
		OLED_W_sChar6x8(Character - 'a');
}

void OLED_W_Num11x16(uint8_t num, uint8_t page, uint8_t column)
{
	uint8_t gImage_NUM_11x16[220] = { /* 0X22,0X01,0X6E,0X00,0X10,0X00, */
	0X00,0XF8,0XFE,0X07,0X01,0X01,0X01,0X07,0XFE,0XF8,0X00,0X00,0X01,0X01,0X01,0XFF,
	0XFF,0X00,0X00,0X00,0X00,0X00,0X00,0X1C,0X1E,0X03,0X01,0X01,0X81,0XE3,0X7E,0X1C,
	0X00,0X00,0X0F,0X0F,0X81,0X81,0XC1,0XF1,0XBD,0X0F,0X03,0X00,0X00,0X00,0X80,0XE0,
	0X38,0X0E,0XFF,0XFF,0X00,0X00,0X00,0X00,0X00,0XFF,0XFF,0X41,0X41,0X41,0XC1,0X8F,
	0X0F,0X00,0X00,0XFC,0XFE,0X83,0X41,0X41,0X41,0XC3,0X8E,0X0C,0X00,0X00,0X1F,0X1F,
	0X01,0X03,0X82,0XF2,0X7E,0X0F,0X03,0X00,0X00,0X3C,0X7E,0XC3,0X81,0X81,0X81,0XC3,
	0X7E,0X3C,0X00,0X00,0XFC,0XFE,0X03,0X01,0X01,0X01,0X03,0XFE,0XFC,0X00,0X00,0X1F,
	0X7F,0XE0,0X80,0X80,0X80,0XE0,0X7F,0X1F,0X00,0X00,0X80,0X80,0X80,0XFF,0XFF,0X80,
	0X80,0X80,0X00,0X00,0X00,0XF0,0XF8,0X1C,0X36,0X63,0XC1,0XC0,0XF0,0X70,0X00,0X00,
	0X38,0X78,0XC0,0X80,0X80,0X80,0XC1,0X7F,0X3E,0X00,0X18,0X1E,0X13,0X10,0X90,0X90,
	0XFF,0XFF,0X90,0X90,0X00,0X00,0X30,0X71,0XC1,0X80,0X80,0X80,0XC0,0X7F,0X3F,0X00,
	0X00,0X3F,0X7F,0XC0,0X80,0X80,0X80,0XC0,0X7F,0X3F,0X00,0X00,0X00,0X00,0X00,0XFC,
	0XFF,0X03,0X00,0X00,0X00,0X00,0X00,0X3E,0X7F,0XC1,0X80,0X80,0X80,0XC1,0X7F,0X3E,
	0X00,0X00,0X30,0X71,0XC3,0X82,0X82,0X82,0XC1,0X7F,0X3F,0X00,};

	OLED_Set_Address(page, column);
	OLED_W_DATA(&gImage_NUM_11x16[11*num],11);
	OLED_Set_Address(page+1, column);
	OLED_W_DATA(&gImage_NUM_11x16[11*num+110],11);
}

void OLED_W_Icon11x8(uint8_t num, uint8_t page, uint8_t column)
{
	uint8_t gImage_Icon_11x8[55] = { /* 0X22,0X01,0X6E,0X00,0X10,0X00, */
	0XFF,0X81,0XBD,0X81,0XFF,0X81,0XF5,0XFF,0X81,0XF5,0XFF,0X00,0X7E,0X42,0X42,0X7E,
	0X00,0X7E,0X0C,0X30,0X7E,0X00,0XFF,0X81,0XBD,0XA5,0XBD,0X81,0XBD,0X85,0XBD,0X81,
	0XFF,0XFF,0X81,0XBD,0XA1,0XA1,0X81,0XBD,0XA5,0XA5,0X81,0XFF,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,};
	// 0 = off , 1 = on, 2 = on , 3 = Lo charge, 4 = not Lo charge
	OLED_Set_Address(page, column);
	OLED_W_DATA(&gImage_Icon_11x8[11*num],11);

}

void OLED_display_mV(uint8_t page, uint8_t column, int data)
{
	OLED_Set_Address(page, column);

	OLED_W_Num6x8(data/10000);
	OLED_W_Num6x8(data%10000/1000);
	OLED_W_Num6x8(data%10000%1000/100);
	OLED_W_Num6x8(data%10000%1000%100/10);
	OLED_W_Num6x8(data%10000%1000%100%10);
	OLED_W_sChar6x8('m'-'a');
	OLED_W_BChar6x8('V'-'A');
}

void OLED_display_mA(uint8_t page, uint8_t column, int data)
{
	OLED_Set_Address(page, column);

	OLED_W_Num6x8(data/10000);
	OLED_W_Num6x8(data%10000/1000);
	OLED_W_Num6x8(data%10000%1000/100);
	OLED_W_Num6x8(data%10000%1000%100/10);
	OLED_W_Num6x8(data%10000%1000%100%10);
	OLED_W_sChar6x8('m'-'a');
	OLED_W_BChar6x8('A'-'A');
}


void OLED_display_string(uint8_t page, uint8_t column, char *string)
{
	int i;
	uint8_t Character;
	uint8_t dot[2] = { 0x00,0xC0 };

	OLED_Set_Address(page, column);

	for(i=0;i<sizeof(string);i++)
	{
		Character = *(string+i);
		if(Character >= '0' && Character <= '9')
			OLED_W_Num6x8(Character - '0');
		else if(Character >= 'A' && Character <= 'Z')
			OLED_W_BChar6x8(Character - 'A');
		else if(Character >= 'a' && Character <= 'z')
			OLED_W_sChar6x8(Character - 'a');
		else if(Character == '.')
			OLED_W_DATA(&dot[0],2);
//		else
//			OLED_W_DATA(&dot[0],2);
	}
}

void OLED_display_string_100m(uint8_t page, uint8_t column, char *string)
{
	int i;
	uint8_t Character;
	uint8_t dot[2] = { 0x00,0xC0 };

	OLED_Set_Address(page, column);

	for(i=0;i<sizeof(string);i++)
	{
		Character = *(string+i);
		if(Character >= '0' && Character <= '9')
			OLED_W_Num6x8(Character - '0');
		else if(Character >= 'A' && Character <= 'Z')
			OLED_W_BChar6x8(Character - 'A');
		else if(Character >= 'a' && Character <= 'z')
			OLED_W_sChar6x8(Character - 'a');

		if(i == 1)
			OLED_W_DATA(&dot[0],2);
	}
}

void OLED_display_string_Tem(uint8_t page, uint8_t column, char *string)
{
	int i;
	uint8_t Character;
//	uint8_t tem[7] = { 0X04,0X0A,0X04,0X70,0X88,0X88,0X50};
	uint8_t tem[8] = { 0x00,0X02,0X05,0X02,0X78,0X84,0X84,0X48};
	uint8_t minus[5] = { 0x00,0x10,0x10,0x10,0x00 };
	uint8_t plus[5] = { 0x10,0x10,0x7C,0x10,0x10 };


	OLED_Set_Address(page, column);

	for(i=0;i<sizeof(string);i++)
	{
		Character = *(string+i);
		if(Character >= '0' && Character <= '9')
			OLED_W_Num6x8(Character - '0');
		else if(Character >= 'A' && Character <= 'Z')
			OLED_W_BChar6x8(Character - 'A');
		else if(Character >= 'a' && Character <= 'z')
			OLED_W_sChar6x8(Character - 'a');
		else if(Character == '-')
			OLED_W_DATA(&minus[0],5);
		else if(Character == '+')
			OLED_W_DATA(&plus[0],5);
	}
	OLED_W_DATA(&tem[0],8);

}


void OLED_display_V_Num11x16(uint8_t page, uint8_t column,int num)
{
	uint8_t dot[3] = { 0x40,0xE0,0X40 };

	OLED_W_Num11x16(num/10000,page,column);
	OLED_W_Num11x16(num%10000/1000,page,column+11);
	OLED_W_DATA(&dot[0],3);
	OLED_W_Num11x16(num%10000%1000/100,page,column+25);


	OLED_Set_Address(page+1, column+36);
	OLED_W_BChar6x8('V'-'A');
}

void OLED_display_A(uint8_t page, uint8_t column, int data)
{
	uint8_t dot[2] = { 0x00,0xC0 };

	OLED_Set_Address(page, column);

//	OLED_W_Num6x8(data/10000);
	OLED_W_Num6x8(data%10000/1000);

	OLED_W_DATA(&dot[0],2);

	OLED_W_Num6x8(data%10000%1000/100);
	OLED_W_Num6x8(data%10000%1000%100/10);
//	OLED_W_Num6x8(data%10000%1000%100%10);
//	OLED_W_sChar6x8('m'-'a');
	OLED_W_BChar6x8('A'-'A');
}

void OLED_display_Battery_Icon(uint8_t page, uint8_t column, int mVBatValue)
{
	uint8_t gImage_battery_start_3x16[6] = { /* 0X22,0X01,0X03,0X00,0X10,0X00, */
	0X00,0XFC,0XFE,0X00,0X3F,0X7F,};

	uint8_t gImage_battery_end_3x16[6] = { /* 0X22,0X01,0X03,0X00,0X10,0X00, */
	0XFE,0XFC,0XE0,0X7F,0X3F,0X07,};

	uint8_t gImage_battery_Full_6x16[12] = { /* 0X22,0X01,0X06,0X00,0X10,0X00, */
	0X06,0XF6,0XF6,0XF6,0XF6,0X06,0X60,0X6F,0X6F,0X6F,0X6F,0X60,};

	uint8_t gImage_battery_Emptyl_6x16[12] = { /* 0X22,0X01,0X06,0X00,0X10,0X00, */
	0X06,0X06,0X06,0X06,0X06,0X06,0X60,0X60,0X60,0X60,0X60,0X60,};

	int i=0,nBat=0,maxBat=5;

	if(mVBatValue <= 12000) nBat = 0;
	else if(mVBatValue <= 12900) nBat = 1;
	else if(mVBatValue <= 13100) nBat = 2;
	else if(mVBatValue <= 13300) nBat = 3;
	else if(mVBatValue <= 13500) nBat = 4;
	else nBat = 5;

	OLED_Set_Address(page, column);
	OLED_W_DATA(&gImage_battery_start_3x16[0],3);
	OLED_Set_Address(page+1, column);
	OLED_W_DATA(&gImage_battery_start_3x16[3],3);

	for(i=0;i<nBat;i++)
	{
		OLED_Set_Address(page, column+3+i*6);
		OLED_W_DATA(&gImage_battery_Full_6x16[0],6);
		OLED_Set_Address(page+1, column+3+i*6);
		OLED_W_DATA(&gImage_battery_Full_6x16[6],6);
	}

	for(;i<maxBat;i++)
	{
		OLED_Set_Address(page, column+3+i*6);
		OLED_W_DATA(&gImage_battery_Emptyl_6x16[0],6);
		OLED_Set_Address(page+1, column+3+i*6);
		OLED_W_DATA(&gImage_battery_Emptyl_6x16[6],6);
	}


	OLED_Set_Address(page, column+3+i*6);
	OLED_W_DATA(&gImage_battery_end_3x16[0],3);
	OLED_Set_Address(page+1, column+3+i*6);
	OLED_W_DATA(&gImage_battery_end_3x16[3],3);

}

void OLED_display_Battery_Icon_wide(uint8_t page, uint8_t column, int mVBatValue)
{
	uint8_t gImage_battery_start_4x16[8] = { /* 0X22,0X01,0X03,0X00,0X10,0X00, */
	0X00,0XFC,0XFE,0X06,  0X00,0X3F,0X7F,0X60};

	uint8_t gImage_battery_end_6x16[12] = { /* 0X22,0X01,0X03,0X00,0X10,0X00, */
	0X06,0XFE,0XFC,0XE0,0XE0,0XE0,  0X60,0X7F,0X3F,0X07,0X07,0X07};

	uint8_t gImage_battery_Full_8x16[16] = { /* 0X22,0X01,0X06,0X00,0X10,0X00, */
	0X06,0XF6,0XF6,0XF6,0XF6,0XF6,0XF6,0X06,  0X60,0X6F,0X6F,0X6F,0X6F,0X6F,0X6F,0X60,};

	uint8_t gImage_battery_Emptyl_8x16[16] = { /* 0X22,0X01,0X06,0X00,0X10,0X00, */
	0X06,0X06,0X06,0X06,0X06,0X06,0X06,0X06,   0X60,0X60,0X60,0X60,0X60,0X60,0X60,0X60,};

	int i=0,nBat=0,maxBat=5;

	if(mVBatValue <= 12000) nBat = 0;
	else if(mVBatValue <= 12900) nBat = 1;
	else if(mVBatValue <= 13100) nBat = 2;
	else if(mVBatValue <= 13300) nBat = 3;
	else if(mVBatValue <= 13500) nBat = 4;
	else nBat = 5;

	OLED_Set_Address(page, column);
	OLED_W_DATA(&gImage_battery_start_4x16[0],4);
	OLED_Set_Address(page+1, column);
	OLED_W_DATA(&gImage_battery_start_4x16[4],4);

	for(i=0;i<nBat;i++)
	{
		OLED_Set_Address(page, column+4+i*8);
		OLED_W_DATA(&gImage_battery_Full_8x16[0],8);
		OLED_Set_Address(page+1, column+4+i*8);
		OLED_W_DATA(&gImage_battery_Full_8x16[8],8);
	}

	for(;i<maxBat;i++)
	{
		OLED_Set_Address(page, column+4+i*8);
		OLED_W_DATA(&gImage_battery_Emptyl_8x16[0],8);
		OLED_Set_Address(page+1, column+4+i*8);
		OLED_W_DATA(&gImage_battery_Emptyl_8x16[8],8);
	}


	OLED_Set_Address(page, column+4+i*8);
	OLED_W_DATA(&gImage_battery_end_6x16[0],6);
	OLED_Set_Address(page+1, column+4+i*8);
	OLED_W_DATA(&gImage_battery_end_6x16[6],6);

}

void OLED_display_Version(uint8_t page, uint8_t column, int nVersion)
{
	uint8_t dot[2] = { 0x00,0xC0 };

	OLED_display_string(page,column,"Ver");

	OLED_W_Num6x8(nVersion/100);

	OLED_W_DATA(&dot[0],2);

	OLED_W_Num6x8(nVersion%100/10);
	OLED_W_Num6x8(nVersion%100%10);
}

void OLED_display_live_action(uint8_t page, uint8_t column)
{
	uint8_t gImage_liveAction_5x8[10] = {
	0X78,0X84,0XB4,0X84,0X78,0X00,0X30,0X48,0X30,0X00};

	static int nAction = 0;

	OLED_Set_Address(page, column);

	if(nAction++ == 0)
	{
		OLED_W_DATA(&gImage_liveAction_5x8[0],5);
	}
	else
	{
		nAction = 0;
		OLED_W_DATA(&gImage_liveAction_5x8[5],5);
	}
}

int OLED_IsScreenOn(void)
{
	return isScreenOn;
}

int OLED_IsScreenOff(void)
{
	return !isScreenOn;
}

void OLED_SetScreenOn(void)
{
	isScreenOn = 1;
}

void OLED_SetScreenOff(void)
{
	isScreenOn = 0;
}

void OLED_SCREEN_ON(void)
{
	if(OLED_IsScreenOff())
	{
		OLED_Init();
		HAL_Delay(10);
		OLED_Screen_Clear();
		OLED_image_test_iROAD();
		HAL_Delay(1000);
//		OLED_image_iROAD();
		HAL_Delay(400);
		OLED_Screen_Clear();
		OLED_SetScreenOn();
	}
	if(gCount_SCREEN_IDLE_TIME >= DELAY_SCREEN_IDLE_TIME)
	{
		OLED_W_Command(0xAE);	//Display OFF
	}
	else
	{
		OLED_W_Command(0xAF);	//Display ON
	}
}

void OLED_SCREEN_OFF(void)
{
	if(OLED_IsScreenOn())
	{
		OLED_W_Command(0xAE);	//Display OFF
		OLED_SetScreenOff();
	}
	gCount_SCREEN_IDLE_TIME = 0;
}
